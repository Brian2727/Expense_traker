{% load static %}
<aside class="fixed inset-y-0 left-0 bg-white w-64 z-50 transform transition-transform duration-200 ease-in-out" id="sidenav-main">
    <!-- Logo -->
    <div class="h-16 flex items-center justify-between px-4 border-b border-gray-100">
        <a href="/" class="flex items-center">
            <img src="{% static 'assets/img/brand/Ext_logo2.png' %}" class="h-8 w-auto" alt="Logo">
            <span class="ml-2 text-lg font-semibold text-gray-900">ExpenseTracker</span>
        </a>
        <button class="sm:hidden p-2 rounded-md hover:bg-gray-100" data-action="sidenav-close">
            <i class="ri-close-line text-xl text-gray-600"></i>
        </button>
    </div>

    <!-- Navigation -->
    <nav class="px-4 py-4 h-[calc(100vh-4rem)] overflow-y-auto">
        <div class="space-y-4">
            <!-- Main Navigation -->
            <div class="space-y-1">
                <a href="/" class="flex items-center px-2 py-2 text-sm font-medium rounded-lg {% if 'index' in segment %}text-indigo-600 bg-indigo-50{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="ri-dashboard-line text-xl mr-3 {% if 'index' in segment %}text-indigo-600{% else %}text-gray-400{% endif %}"></i>
                    Dashboard
                </a>
                
                <a href="{% url 'calendar' %}" class="flex items-center px-2 py-2 text-sm font-medium rounded-lg {% if 'calendar' in segment %}text-indigo-600 bg-indigo-50{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="ri-calendar-line text-xl mr-3 {% if 'calendar' in segment %}text-indigo-600{% else %}text-gray-400{% endif %}"></i>
                    Calendar
                </a>

                <a href="#" class="flex items-center px-2 py-2 text-sm font-medium rounded-lg {% if 'ai' in segment %}text-indigo-600 bg-indigo-50{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="ri-robot-line text-xl mr-3 {% if 'ai' in segment %}text-indigo-600{% else %}text-gray-400{% endif %}"></i>
                    AI Adviser
                </a>

                <a href="{% url 'Profile' uid=request.user.id %}" class="flex items-center px-2 py-2 text-sm font-medium rounded-lg {% if 'profile' in segment %}text-indigo-600 bg-indigo-50{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                    <i class="ri-user-line text-xl mr-3 {% if 'profile' in segment %}text-indigo-600{% else %}text-gray-400{% endif %}"></i>
                    Profile
                </a>
            </div>

            <!-- Resources Section -->
            <div class="pt-4">
                <div class="px-2 mb-2">
                    <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Resources</h3>
                </div>
                
                <div class="space-y-1">
                    <a href="#" class="flex items-center px-2 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100">
                        <i class="ri-calculator-line text-xl mr-3 text-gray-400"></i>
                        Calculator
                    </a>

                    <a href="#" class="flex items-center px-2 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100">
                        <i class="ri-information-line text-xl mr-3 text-gray-400"></i>
                        About Creator
                    </a>
                </div>
            </div>
        </div>

        <!-- Logout Button -->
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100">
            <a href="{% url 'log_out' %}" class="flex items-center px-2 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50">
                <i class="ri-logout-box-line text-xl mr-3"></i>
                Sign Out
            </a>
        </div>
    </nav>
</aside>

<!-- Mobile backdrop -->
<div class="fixed inset-0 bg-gray-600 bg-opacity-50 z-40 sm:hidden hidden" id="sidenav-backdrop"></div>

<!-- JavaScript for mobile menu -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const backdrop = document.getElementById('sidenav-backdrop');
        const sidenav = document.getElementById('sidenav-main');
        
        // Toggle menu
        document.querySelectorAll('[data-action="sidenav-pin"]').forEach(button => {
            button.addEventListener('click', () => {
                sidenav.classList.toggle('-translate-x-full');
                backdrop.classList.toggle('hidden');
            });
        });

        // Close menu
        document.querySelectorAll('[data-action="sidenav-close"]').forEach(button => {
            button.addEventListener('click', () => {
                sidenav.classList.add('-translate-x-full');
                backdrop.classList.add('hidden');
            });
        });

        // Close menu when clicking outside
        backdrop.addEventListener('click', () => {
            sidenav.classList.add('-translate-x-full');
            backdrop.classList.add('hidden');
        });
    });
</script>